<?xml version="1.0"?>
<!DOCTYPE hibernate-mapping PUBLIC "-//Hibernate/Hibernate Mapping DTD 3.0//EN"
"http://hibernate.sourceforge.net/hibernate-mapping-3.0.dtd">
<hibernate-mapping>
	<query name="User.findByUsername"> 
		FROM User as user
		LEFT JOIN FETCH user.userRoles
	    WHERE username = :username
	</query>

	<query name="User.findByUsernamePattern"> 
		SELECT DISTINCT user
		FROM User as user
	    WHERE lcase(firstName) like  :pattern OR lcase(lastName) like :pattern
	</query>
	
	<query name="User.findActiveByUsernamePattern"> 
		SELECT DISTINCT user
		FROM User as user
	    WHERE (lcase(firstName) like  :pattern OR lcase(lastName) like :pattern) AND active = true
	</query>	

</hibernate-mapping>